<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>フォント試し書きツール</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: sans-serif;
  padding: 20px;
  background: #f0f0f0;
}

h1 {
  text-align: center;
}

#controls {
  margin-bottom: 20px;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

#controls label {
  display: flex;
  flex-direction: column;
  font-size: 14px;
}

#preview {
  padding: 20px;
  border: 2px dashed #aaa;
  min-height: 200px;
}
</style>

<!-- JSON管理フォント -->
<script>
const localFonts = [
  {
    label: "けいふぉんと",
    family: "KeiFont",
    file: "./fonts/keifont.ttf"
  },
  {
    label: "赤ずきんPOP",
    family: "AkazukiPOP",
    file: "./fonts/AkazukiPOP.otf"
  },
  {
    label: "夜すがら",
    family: "yosugaraver1_2",
    file: "./fonts/yosugaraver1_2.ttf"
  },
  {
    label: "キルゴU",
    family: "KillGothic",
    file: "./fonts/KillGothic-U-kanaAB.ttf"
  },
  {
    label: "ラノベpop",
    family: "LightNovelPOP",
    file: "./fonts/LightNovelPOPV2.ttf"
  },
  {
    label: "玉ねぎ楷書「激」v7",
    family: "玉ねぎ楷書「激」v7",
    file: "./fonts/玉ねぎ楷書「激」無料版v7改.ttf"
  },
  {
    label: "851チカラズヨク",
    family: "851CHIKARA-DZUYOKU",
    file: "./fonts/851CHIKARA-DZUYOKU_kanaA_004.ttf"
  },
  {
    label: "Mojangles",
    family: "Mojangles",
    file: "./fonts/Mojangles.ttf"
  },
  {
    label: "源界明朝",
    family: "genkai-mincho",
    file: "./fonts/genkai-mincho.ttf"
  },
  {
    label: "源瑛きわみゴ",
    family: "GenEiKiwamiGo",
    file: "./fonts/GenEiKiwamiGo.ttf"
  },
  {
    label: "源瑛POP",
    family: "GenEiPOPle-Bk",
    file: "./fonts/GenEiPOPle-Bk.ttf"
  },
];
</script>
</head>

<body>

<h1>フォント試し書きツール</h1>

<div id="controls">
  <label>フォント
    <select id="fontSelect">
      <option value="sans-serif">標準（sans-serif）</option>
      <option value="serif">serif</option>
      <option value="monospace">monospace</option>
      <option value="system-ui">system-ui</option>
    </select>
  </label>

  <label>フォントファイル追加
    <input type="file" id="fontFile" accept=".ttf,.otf">
  </label>

  <label>テキスト
    <input type="text" id="textInput" placeholder="あのイーハトーヴォのすきとおった風、夏でも底に冷たさをもつ青いそら、うつくしい森で飾られたモリーオ市、郊外のぎらぎらひかる草の波。">
  </label>

  <label>サイズ(px)
    <input type="number" id="fontSize" value="48" min="10" max="200">
  </label>

  <label>色
    <input type="color" id="fontColor" value="#000000">
  </label>

  <label>太さ
    <select id="fontWeight">
      <option value="400">通常</option>
      <option value="700">太字</option>
    </select>
  </label>

  <label>斜体
    <input type="checkbox" id="fontItalic">
  </label>

  <label>行間(em)
    <input type="number" id="lineHeight" value="1.2" step="0.1">
  </label>

  <label>背景色
    <input type="color" id="bgColor" value="#ffffff">
  </label>
</div>

<div id="preview">ここに文字が表示されます</div>

<script>
const preview = document.getElementById("preview");
const fontSelect = document.getElementById("fontSelect");
const fontFileInput = document.getElementById("fontFile");
const textInput = document.getElementById("textInput");
const fontSizeInput = document.getElementById("fontSize");
const fontColorInput = document.getElementById("fontColor");
const fontWeightInput = document.getElementById("fontWeight");
const fontItalicInput = document.getElementById("fontItalic");
const lineHeightInput = document.getElementById("lineHeight");
const bgColorInput = document.getElementById("bgColor");

/* JSONフォント読み込み */
function loadLocalFonts() {
  const style = document.createElement("style");

  localFonts.forEach(font => {
    style.textContent += `
@font-face {
  font-family: '${font.family}';
  src: url('${font.file}');
}
`;

    const option = document.createElement("option");
    option.value = `'${font.family}'`;
    option.textContent = font.label;
    fontSelect.appendChild(option);
  });

  document.head.appendChild(style);
}

loadLocalFonts();

/* ファイルからフォント追加 */
fontFileInput.addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file) return;

  const fontName = file.name.replace(/\.[^/.]+$/, "");
  const reader = new FileReader();

  reader.onload = ev => {
    const style = document.createElement("style");
    style.textContent = `
@font-face {
  font-family: '${fontName}';
  src: url(${ev.target.result});
}
`;
    document.head.appendChild(style);

    const option = document.createElement("option");
    option.value = `'${fontName}'`;
    option.textContent = `読み込み: ${fontName}`;
    fontSelect.appendChild(option);
    fontSelect.value = `'${fontName}'`;

    updatePreview();
  };

  reader.readAsDataURL(file);
});

/* プレビュー更新 */
function updatePreview() {
  preview.textContent = textInput.value;
  preview.style.fontFamily = fontSelect.value;
  preview.style.fontSize = fontSizeInput.value + "px";
  preview.style.color = fontColorInput.value;
  preview.style.fontWeight = fontWeightInput.value;
  preview.style.fontStyle = fontItalicInput.checked ? "italic" : "normal";
  preview.style.lineHeight = lineHeightInput.value;
  preview.style.backgroundColor = bgColorInput.value;
}

[
  fontSelect,
  textInput,
  fontSizeInput,
  fontColorInput,
  fontWeightInput,
  fontItalicInput,
  lineHeightInput,
  bgColorInput
].forEach(el => el.addEventListener("input", updatePreview));

updatePreview();
</script>

</body>
</html>
