<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>フォント試し書きツール</title>
<style>
  body { font-family: sans-serif; padding: 20px; background-color: #f0f0f0; }
  h1 { text-align: center; }
  #controls { margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 10px; }
  #controls label { display: flex; flex-direction: column; font-size: 14px; }
  #preview { padding: 20px; border: 2px dashed #aaa; min-height: 200px; }
</style>
</head>
<body>

<h1>フォント試し書きツール</h1>

<div id="controls">
  <label>フォントファイル (ttf/otf)
    <input type="file" id="fontFile" accept=".ttf,.otf">
  </label>
  <label>テキスト
    <input type="text" id="textInput" value="こんにちは、世界！">
  </label>
  <label>サイズ (px)
    <input type="number" id="fontSize" value="48" min="10" max="200">
  </label>
  <label>色
    <input type="color" id="fontColor" value="#000000">
  </label>
  <label>太さ
    <select id="fontWeight">
      <option value="400">通常</option>
      <option value="700">太字</option>
    </select>
  </label>
  <label>斜体
    <input type="checkbox" id="fontItalic">
  </label>
  <label>行間 (em)
    <input type="number" id="lineHeight" value="1.2" step="0.1" min="0.5" max="3">
  </label>
  <label>背景色
    <input type="color" id="bgColor" value="#ffffff">
  </label>
</div>

<div id="preview">ここに文字が表示されます</div>

<script>
  const fontFileInput = document.getElementById('fontFile');
  const textInput = document.getElementById('textInput');
  const fontSizeInput = document.getElementById('fontSize');
  const fontColorInput = document.getElementById('fontColor');
  const fontWeightInput = document.getElementById('fontWeight');
  const fontItalicInput = document.getElementById('fontItalic');
  const lineHeightInput = document.getElementById('lineHeight');
  const bgColorInput = document.getElementById('bgColor');
  const preview = document.getElementById('preview');

  let fontName = null;

  fontFileInput.addEventListener('change', e => {
    const file = e.target.files[0];
    if (!file) return;

    fontName = file.name.replace(/\.[^/.]+$/, ""); // 拡張子除去
    const reader = new FileReader();
    reader.onload = function(evt) {
      const fontData = evt.target.result;
      const newStyle = document.createElement('style');
      newStyle.textContent = `
        @font-face {
          font-family: '${fontName}';
          src: url(${fontData});
        }
      `;
      document.head.appendChild(newStyle);
      updatePreview();
    };
    reader.readAsDataURL(file);
  });

  function updatePreview() {
    if (!fontName) return;
    preview.textContent = textInput.value;
    preview.style.fontFamily = fontName;
    preview.style.fontSize = fontSizeInput.value + "px";
    preview.style.color = fontColorInput.value;
    preview.style.fontWeight = fontWeightInput.value;
    preview.style.fontStyle = fontItalicInput.checked ? "italic" : "normal";
    preview.style.lineHeight = lineHeightInput.value;
    preview.style.backgroundColor = bgColorInput.value;
  }

  textInput.addEventListener('input', updatePreview);
  fontSizeInput.addEventListener('input', updatePreview);
  fontColorInput.addEventListener('input', updatePreview);
  fontWeightInput.addEventListener('change', updatePreview);
  fontItalicInput.addEventListener('change', updatePreview);
  lineHeightInput.addEventListener('input', updatePreview);
  bgColorInput.addEventListener('input', updatePreview);
</script>

</body>
</html>
